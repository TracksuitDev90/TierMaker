/* =========================================================
   Tier Maker â€” CSS (dark, MD3-lean, aligned controls)
========================================================= */

/* ---------- Reset ---------- */
*{box-sizing:border-box;-webkit-tap-highlight-color:transparent}
html,body{height:100%}
body{
  margin:0;
  font:16px/1.45 ui-sans-serif,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji",sans-serif;
  -webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;
  color:var(--text); background:var(--surface); overscroll-behavior:none;
}
img{max-width:100%;display:block}
button{font:inherit;color:inherit;background:none;border:0;cursor:pointer}
input,textarea{font:inherit;color:inherit}
:focus-visible{outline:2px solid transparent; box-shadow:0 0 0 3px rgba(139,125,255,.45); border-radius:8px}
a{color:inherit;text-decoration:none}

/* ---------- Theme ---------- */
:root{
  --surface:#0f1115;
  --surface-raised:#151820;
  --card:#1e1e1e;

  --brand:#E2E540;   /* pear */
  --accent:#6C3BF0;  /* violet */
  --lemon:#EEEDC9;
  --danger:#F05C58;

  --text:#E8EAF0; --muted:#A7B0C0; --border:rgba(255,255,255,.08);
  --radius-xl:18px; --radius-xxl:22px;
  --shadow:0 2px 6px rgba(0,0,0,.18);
}

/* ---------- Layout ---------- */
.wrap{max-width:1200px;margin:0 auto;padding:clamp(16px,2.4vw,28px);display:flex;flex-direction:column}
.header{display:flex;align-items:center;margin-bottom:14px}
.brand{font-weight:1000;letter-spacing:.2px;color:var(--brand);font-size:clamp(31px,5.5vw,51px)}

/* ---------- Panels ---------- */
.panel{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:var(--radius-xl);
  box-shadow:var(--shadow);
  padding:clamp(14px,1.8vw,18px);
  margin-bottom:16px;
}
.section-title{font-size:clamp(18px,2vw,24px);font-weight:900;margin:0 0 14px}

/* ---------- Board ---------- */
.board-title-wrap{display:flex;align-items:center;gap:8px;margin:0 0 18px}
.title-pen{width:28px;height:28px;border-radius:8px;display:grid;place-items:center;opacity:.8}
.title-pen:hover{opacity:1}
.title-pen svg{display:block}

.board-title{
  font-size:clamp(20px,2.2vw,28px);font-weight:900;margin:0;text-shadow:0 1px 0 rgba(0,0,0,.25)
}
.board-title[contenteditable]:empty::before{content:'Tier Board (optional title)';color:var(--muted)}
.board-title[contenteditable="true"]{border-bottom:2px dashed var(--brand)}
.board-title[contenteditable="true"]:focus{outline:0;box-shadow:none;border-bottom:2px solid var(--brand)}

/* ---------- Tier board grid ---------- */
#tierBoard{display:grid;gap:12px}
.tier-row{display:grid;grid-template-columns:180px 1fr;gap:12px;align-items:stretch;border-radius:var(--radius-xl)}
.tier-row.removing{max-height:0!important;opacity:0}
@media (max-width:768px){ .tier-row{grid-template-columns:140px 1fr} }

/* Label column */
.tier-label{
  position:relative;border-radius:16px;padding:12px;display:flex;align-items:center;justify-content:center;
  border:1px solid rgba(0,0,0,.14)
}
.label-chip{
  background:transparent; color:#111; display:flex; align-items:center; justify-content:center;
  font-weight:900; font-size:32px; line-height:1.15; text-transform:uppercase; letter-spacing:.5px;
  padding:10px 12px; text-align:center; word-break:break-word; hyphens:auto;
}
.row-del{
  position:absolute; right:8px; bottom:8px; width:32px; height:32px; border-radius:9px; color:#fff;
  display:grid; place-items:center; border:1px solid rgba(255,255,255,.18); box-shadow:var(--shadow)
}
.row-del svg{width:16px;height:16px;fill:currentColor}

/* Drop area */
.tier-drop{
  background:var(--surface-raised);
  border:1px solid var(--border);
  border-radius:16px;
  padding:14px;
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(116px,1fr));
  gap:10px;
  min-height:138px;
}

/* ---------- Tokens ---------- */
.token{
  width:110px;height:110px;border-radius:999px;background:#7da7ff;
  display:flex;align-items:center;justify-content:center;
  user-select:none; -webkit-user-select:none; cursor:pointer;
  transition:transform .18s ease, box-shadow .18s ease;
  border:1px solid rgba(255,255,255,.06);
  box-shadow:0 10px 24px rgba(0,0,0,.30), 0 2px 6px rgba(0,0,0,.22);
}
.token:hover{transform:translateY(-2px) scale(1.015)}
.token .label{padding:0 14px;text-align:center;font-weight:900;font-size:18px;line-height:1;color:#111}
.token img{width:100%;height:100%;object-fit:cover;border-radius:999px;pointer-events:none}
.token.selected{outline:3px solid var(--accent);outline-offset:4px}
@media (max-width:768px){ .token{width:96px;height:96px} }

/* Drag */
.drag-ghost{
  position:fixed;left:0;top:0;z-index:50;pointer-events:none;width:110px;height:110px;border-radius:999px;
  opacity:.92;transform:translate3d(0,0,0);filter:drop-shadow(0 18px 28px rgba(0,0,0,.45))
}
@media (max-width:768px){.drag-ghost{width:96px;height:96px}}
.drag-hidden{opacity:.25}
body.dragging-item{cursor:grabbing;user-select:none;-webkit-user-select:none}

/* ---------- Storage + Controls ---------- */
.storage-panel .storage-header{display:flex;align-items:center;justify-content:flex-start;margin-bottom:12px}
.controls-row{display:flex;gap:12px;flex-wrap:wrap}
.btn{
  display:inline-flex;align-items:center;gap:10px;height:48px;padding:0 18px;border-radius:16px;
  background:var(--surface);color:var(--text);border:1px solid rgba(255,255,255,.08);box-shadow:var(--shadow)
}
.btn .ico{width:22px;height:22px;display:grid;place-items:center}
.btn .ico svg{width:22px;height:22px;display:block}
.btn.pear{background:var(--brand);color:#111;border-color:rgba(0,0,0,.16)}
.btn.lemon{background:var(--lemon);color:#111;border-color:rgba(0,0,0,.12)}
.btn.danger{background:var(--danger);color:#111}
.btn.accent{background:var(--accent);color:#fff}

/* Creator alignment */
.creator-grid .creator-line{display:flex;align-items:center;gap:12px}
.input{height:48px;border-radius:12px;padding:0 14px;border:1px solid var(--border);background:#0c0e12;color:var(--text);min-width:260px}
.color-dot{height:48px;width:48px;border-radius:12px;border:1px solid var(--border);background:#111;padding:0}
.same-height{height:48px}
#imageInput{appearance:none}
input[type="file"]::-webkit-file-upload-button{
  background: var(--brand); border: 1px solid rgba(0,0,0,.2);
  padding: 10px 14px; border-radius: 12px; font-weight: 800; color:#111; cursor:pointer
}
input[type="file"]{color:var(--muted)}
.file-note{margin-left:5px}

/* Tray grid */
.tray-grid{background:var(--surface-raised);border:1px solid var(--border);border-radius:16px;box-shadow:var(--shadow);padding:16px;display:grid;grid-template-columns:repeat(auto-fill,minmax(116px,1fr));gap:14px}
@media (max-width:768px){ .tray-grid{grid-template-columns:repeat(auto-fill,minmax(96px,1fr))} }

/* Radial */
.radial{position:fixed;inset:0;z-index:60}
.radial.hidden{display:none}
.radial-options{position:relative;width:100%;height:100%}
.radial-option{position:absolute;width:56px;height:56px;border-radius:999px;transform:translate(-50%,-50%)}
.radial-option .dot{width:42px;height:42px;border-radius:999px;display:grid;place-items:center;font-weight:900;font-size:13px;border:1px solid rgba(0,0,0,.1);box-shadow:0 2px 10px rgba(0,0,0,.15)}
.radial-close{position:absolute;transform:translate(-50%,-50%);width:44px;height:44px;border-radius:999px;border:1px solid var(--border);background:var(--surface-raised);color:var(--text);display:grid;place-items:center;box-shadow:0 2px 10px rgba(0,0,0,.25)}
.radial-close svg{width:22px;height:22px}

/* Export state */
.exporting .token,
.exporting .token:hover{transform:none!important}
.exporting .token::after{display:none!important}
.exporting .panel,
.exporting .tier-drop{backdrop-filter:none!important;background:var(--surface-raised)!important;border-color:var(--border)!important}
.exporting .board-title[contenteditable]:empty::before{content:''!important}
.exporting.no-title .board-title-wrap{display:none!important}

/* A11y helper */
.sr{position:absolute;width:1px;height:1px;margin:-1px;padding:0;border:0;overflow:hidden;clip:rect(0 0 0 0);clip-path:inset(50%)}

/* Print */
@media print{
  .panel,.tray-grid,.controls-row,.creator-grid,.radial{display:none!important}
  #boardPanel{display:block !important}
}